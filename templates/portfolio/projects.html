{% extends 'portfolio/base.html' %}

{% block title %}Projects - Jem Andrew{% endblock %}

{% block content %}
<!-- Page Header -->
<section style="padding: 8rem 0 4rem 0;">
    <div class="container">
        <p style="color: var(--primary-light); font-family: var(--font-mono); font-size: 0.95rem; margin-bottom: 1rem;">
            My Work
        </p>
        <h1 style="font-size: clamp(2.5rem, 6vw, 4rem); margin-bottom: 1.5rem;">
            Projects
        </h1>
        <p style="font-size: 1.2rem; color: var(--text-secondary); max-width: 700px; line-height: 1.8;">
            From professional systems to personal experiments â€“ a collection of projects that showcase my technical skills and problem-solving approach.
        </p>
    </div>
</section>

<!-- Filters -->
<section style="padding: 2rem 0;">
    <div class="container">
        <div style="display: flex; gap: 1rem; flex-wrap: wrap; align-items: center;">
            <span style="color: var(--text-muted); font-size: 0.9rem; margin-right: 0.5rem;">Filter:</span>
            <button class="filter-btn active" data-filter="all">All ({{ projects|length }})</button>
            <button class="filter-btn" data-filter="professional">Professional (1)</button>
            <button class="filter-btn" data-filter="personal">Personal (3)</button>
            <button class="filter-btn" data-filter="academic">Academic (2)</button>
        </div>
    </div>
</section>

<!-- Projects Grid - Expandable Cards -->
<section style="padding: 2rem 0 6rem 0;">
    <div class="container">
        <div style="display: flex; flex-direction: column; gap: 1.5rem;">
            
            {% for project in projects %}
            <div class="project-card-compact" data-category="{{ project.category }}" data-expanded="false">
                <!-- Collapsed View -->
                <div class="card-compact-header">
                    <!-- Icon -->
                    <div class="project-icon">
                        {% if project.category == 'professional' %}
                            <i class="fas fa-briefcase"></i>
                        {% elif project.category == 'academic' %}
                            <i class="fas fa-graduation-cap"></i>
                        {% else %}
                            <i class="fas fa-code"></i>
                        {% endif %}
                    </div>
                    
                    <!-- Title & Summary -->
                    <div class="project-header-content">
                        <h3 class="project-title">{{ project.title }}</h3>
                        <p class="project-summary">{{ project.short_description|truncatewords:15 }}</p>
                    </div>
                    
                    <!-- Badges & Expand Icon -->
                    <div class="project-header-meta">
                        <span class="tag category-badge badge-{{ project.category }}">
                            {{ project.get_category_display }}
                        </span>
                        <span class="project-year">{{ project.created_date.year }}</span>
                        <div class="expand-icon">
                            <i class="fas fa-plus"></i>
                        </div>
                    </div>
                </div>
                
                <!-- Expanded Content -->
                <div class="card-compact-body">
                    <div class="card-compact-body-inner">
                        <!-- Full Description -->
                        <p class="project-description">
                            {{ project.detailed_description|default:project.short_description }}
                        </p>
                        
                        <!-- Key Features -->
                        {% if project.key_features %}
                        <div class="project-features">
                            <h4 class="section-heading">Key Features</h4>
                            <ul class="features-list">
                                {% for feature in project.key_features %}
                                <li>{{ feature }}</li>
                                {% endfor %}
                            </ul>
                        </div>
                        {% endif %}
                        
                        <!-- Tech Stack -->
                        <div class="project-tech">
                            <h4 class="section-heading">Technologies</h4>
                            <div class="tech-tags">
                                {% for tech in project.technology_list %}
                                <span class="tag">{{ tech }}</span>
                                {% endfor %}
                            </div>
                        </div>
                        
                        <!-- Action Buttons -->
                        <div class="project-actions">
                            {% if project.github_url %}
                            <a href="{{ project.github_url }}" target="_blank" class="btn btn-primary" onclick="event.stopPropagation();">
                                <i class="fab fa-github"></i>
                                View Code
                            </a>
                            {% elif project.category == 'professional' %}
                            <button class="btn btn-disabled" disabled>
                                <i class="fas fa-lock"></i>
                                Confidential
                            </button>
                            {% endif %}
                            
                            {% if project.live_demo_url %}
                            <a href="{{ project.live_demo_url }}" target="_blank" class="btn" onclick="event.stopPropagation();">
                                <i class="fas fa-external-link-alt"></i>
                                Live Demo
                            </a>
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>
            {% endfor %}
            
        </div>
        
        <!-- Empty state -->
        <div id="emptyState" style="display: none; text-align: center; padding: 4rem 0;">
            <i class="fas fa-folder-open" style="font-size: 4rem; color: var(--border); margin-bottom: 1rem;"></i>
            <p style="color: var(--text-muted); font-size: 1.1rem;">
                No projects found in this category.
            </p>
        </div>
    </div>
</section>
{% endblock %}