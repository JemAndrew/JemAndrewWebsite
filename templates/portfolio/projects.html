{% extends 'portfolio/base.html' %}

{% block title %}Projects - Jem Andrew{% endblock %}

{% block content %}
<!-- Page Header -->
<section style="padding: 8rem 0 4rem 0;">
    <div class="container">
        <p style="color: var(--primary-light); font-family: var(--font-mono); font-size: 0.95rem; margin-bottom: 1rem;">
            My Work
        </p>
        <h1 style="font-size: clamp(2.5rem, 6vw, 4rem); margin-bottom: 1.5rem;">
            Projects
        </h1>
        <p style="font-size: 1.2rem; color: var(--text-secondary); max-width: 700px; line-height: 1.8;">
            From professional systems to personal experiments â€“ a collection of projects that showcase my technical skills and problem-solving approach.
        </p>
    </div>
</section>

<!-- Optional Filters (Subtle) -->
<section style="padding: 2rem 0;">
    <div class="container">
        <div style="display: flex; gap: 1rem; flex-wrap: wrap; align-items: center;">
            <span style="color: var(--text-muted); font-size: 0.9rem; margin-right: 0.5rem;">Filter:</span>
            <button class="filter-btn active" data-filter="all" style="padding: 0.5rem 1rem; background: rgba(59, 130, 246, 0.1); border: 1px solid rgba(59, 130, 246, 0.3); border-radius: 6px; color: var(--primary-light); cursor: pointer; transition: all 0.2s; font-size: 0.9rem;">
                All ({{ projects|length }})
            </button>
            <button class="filter-btn" data-filter="professional" style="padding: 0.5rem 1rem; background: transparent; border: 1px solid var(--border); border-radius: 6px; color: var(--text-secondary); cursor: pointer; transition: all 0.2s; font-size: 0.9rem;">
                Professional (1)
            </button>
            <button class="filter-btn" data-filter="personal" style="padding: 0.5rem 1rem; background: transparent; border: 1px solid var(--border); border-radius: 6px; color: var(--text-secondary); cursor: pointer; transition: all 0.2s; font-size: 0.9rem;">
                Personal (3)
            </button>
            <button class="filter-btn" data-filter="academic" style="padding: 0.5rem 1rem; background: transparent; border: 1px solid var(--border); border-radius: 6px; color: var(--text-secondary); cursor: pointer; transition: all 0.2s; font-size: 0.9rem;">
                Academic (2)
            </button>
        </div>
    </div>
</section>

<!-- Projects Grid -->
<section style="padding: 2rem 0 6rem 0;">
    <div class="container">
        <div class="grid grid-2" style="gap: 2rem;">
            
            {% for project in projects %}
            <div class="card project-card" data-category="{{ project.category }}" style="display: flex; flex-direction: column;">
                <!-- Badge -->
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
                    <span class="tag category-badge badge-{{ project.category }}">
                        {{ project.get_category_display }}
                    </span>
                    <span style="color: var(--text-muted); font-size: 0.9rem;">
                        {{ project.created_date.year }}
                    </span>
                </div>
                
                <!-- Title -->
                <h3 class="card-title" style="margin-bottom: 1rem; font-size: 1.5rem;">
                    {{ project.title }}
                </h3>
                
                <!-- Description -->
                <p class="card-description" style="margin-bottom: 1.5rem; flex-grow: 1;">
                    {{ project.detailed_description|default:project.short_description }}
                </p>
                
                <!-- Tech stack tags -->
                <div style="display: flex; flex-wrap: wrap; gap: 0.5rem; margin-bottom: 1.5rem;">
                    {% for tech in project.technology_list %}
                    <span class="tag" style="font-size: 0.8rem;">{{ tech }}</span>
                    {% endfor %}
                </div>
                
                <!-- Key features (if available) -->
                {% if project.key_features %}
                <div style="margin-bottom: 1.5rem;">
                    <details style="cursor: pointer;">
                        <summary style="color: var(--primary-light); font-size: 0.9rem; font-weight: 500; list-style: none; display: flex; align-items: center; gap: 0.5rem;">
                            <i class="fas fa-chevron-right" style="font-size: 0.7rem; transition: transform 0.2s;"></i>
                            Key Features
                        </summary>
                        <ul style="margin-top: 1rem; padding-left: 1.5rem; color: var(--text-secondary); font-size: 0.9rem; line-height: 1.8;">
                            {% for feature in project.key_features %}
                            <li style="margin-bottom: 0.5rem;">{{ feature }}</li>
                            {% endfor %}
                        </ul>
                    </details>
                </div>
                {% endif %}
                
                <!-- Action buttons -->
                <div style="display: flex; gap: 1rem; flex-wrap: wrap; margin-top: auto;">
                    {% if project.github_url %}
                    <a href="{{ project.github_url }}" target="_blank" class="btn btn-primary" style="flex: 1;">
                        <i class="fab fa-github"></i>
                        View Code
                    </a>
                    {% elif project.category == 'professional' %}
                    <button class="btn" style="flex: 1; cursor: not-allowed; opacity: 0.6;" disabled>
                        <i class="fas fa-lock"></i>
                        Confidential
                    </button>
                    {% endif %}
                    
                    {% if project.live_demo_url %}
                    <a href="{{ project.live_demo_url }}" target="_blank" class="btn" style="flex: 1;">
                        <i class="fas fa-external-link-alt"></i>
                        Live Demo
                    </a>
                    {% elif project.status == 'active' and 'Portfolio' in project.title %}
                    <span class="btn" style="flex: 1; cursor: default; border-color: var(--accent); color: var(--accent);">
                        <i class="fas fa-eye"></i>
                        You're Here
                    </span>
                    {% endif %}
                </div>
            </div>
            {% endfor %}
            
        </div>
        
        <!-- Empty state (hidden by default) -->
        <div id="emptyState" style="display: none; text-align: center; padding: 4rem 0;">
            <i class="fas fa-folder-open" style="font-size: 4rem; color: var(--border); margin-bottom: 1rem;"></i>
            <p style="color: var(--text-muted); font-size: 1.1rem;">
                No projects found in this category.
            </p>
        </div>
    </div>
</section>

<!-- Filter functionality -->
<script>
document.addEventListener('DOMContentLoaded', function() {
    const filterButtons = document.querySelectorAll('.filter-btn');
    const projectCards = document.querySelectorAll('.project-card');
    const emptyState = document.getElementById('emptyState');
    
    filterButtons.forEach(button => {
        button.addEventListener('click', function() {
            const filter = this.dataset.filter;
            
            // Update active button
            filterButtons.forEach(btn => {
                btn.classList.remove('active');
                btn.style.background = 'transparent';
                btn.style.color = 'var(--text-secondary)';
            });
            
            this.classList.add('active');
            this.style.background = 'rgba(59, 130, 246, 0.1)';
            this.style.color = 'var(--primary-light)';
            
            // Filter projects
            let visibleCount = 0;
            
            projectCards.forEach(card => {
                const category = card.dataset.category;
                
                if (filter === 'all' || category === filter) {
                    card.style.display = 'flex';
                    card.style.animation = 'fadeIn 0.4s ease forwards';
                    visibleCount++;
                } else {
                    card.style.display = 'none';
                }
            });
            
            // Show/hide empty state
            if (visibleCount === 0) {
                emptyState.style.display = 'block';
            } else {
                emptyState.style.display = 'none';
            }
        });
    });
    
    // Details arrow animation
    document.querySelectorAll('details').forEach(details => {
        details.addEventListener('toggle', function() {
            const arrow = this.querySelector('.fa-chevron-right');
            if (this.open) {
                arrow.style.transform = 'rotate(90deg)';
            } else {
                arrow.style.transform = 'rotate(0deg)';
            }
        });
    });
});
</script>

<style>
/* Category badge colours */
.badge-professional {
    background: rgba(251, 146, 60, 0.1);
    border-color: rgba(251, 146, 60, 0.3);
    color: #fb923c;
}

.badge-personal {
    background: rgba(16, 185, 129, 0.1);
    border-color: rgba(16, 185, 129, 0.3);
    color: #10b981;
}

.badge-academic {
    background: rgba(59, 130, 246, 0.1);
    border-color: rgba(59, 130, 246, 0.3);
    color: #3b82f6;
}

/* Filter button hover states */
.filter-btn:hover {
    background: rgba(59, 130, 246, 0.05) !important;
    border-color: var(--primary) !important;
}

.filter-btn.active {
    background: rgba(59, 130, 246, 0.1) !important;
    border-color: rgba(59, 130, 246, 0.3) !important;
    color: var(--primary-light) !important;
}

/* Project card enhanced hover */
.project-card {
    transition: all 0.3s ease;
}

.project-card:hover {
    transform: translateY(-8px);
    border-color: var(--primary);
    box-shadow: 0 12px 40px rgba(59, 130, 246, 0.15);
}

/* Details summary styling */
details summary::-webkit-details-marker {
    display: none;
}

details[open] summary {
    color: var(--primary);
}
</style>
{% endblock %}